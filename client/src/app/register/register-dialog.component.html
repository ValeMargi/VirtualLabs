<h2 mat-dialog-title>Registrazione</h2>

<mat-dialog-content>
  <div class="container">
  <!--Image profile-->
    <div class="avatar">
      <div class="rounded-box">
        <div class="outer">
          <img class="img" [src]="previewPhoto" />
          <div class="inner">
            <input class="inputfile" type="file" name="pic" accept="image/*" 
              (change)="onFileChanged($event)">
            <label><mat-icon class="camera">camera_alt</mat-icon></label>
          </div>
        </div>
      </div>
    </div>

  <!--RegisterForm--> 
  <form [formGroup]="RegisterForm">

      <!--Nome-->
      <mat-form-field>
      <input #name type="text" placeholder="Nome" formControlName="name" matInput required autofocus>
      <mat-error *ngIf="RegisterForm.get('name').hasError('required')">Il nome è richiesto</mat-error>
      </mat-form-field><br><br>

      <!--Cognome-->
      <mat-form-field>
      <input #surname type="text" placeholder="Cognome" formControlName="surname" matInput required>
      <mat-error *ngIf="RegisterForm.get('surname').hasError('required')">Il cognome è richiesto</mat-error>
      </mat-form-field><br><br>

      <!--Matricola-->
      <mat-form-field>
      <input #id type="text" placeholder="Matricola" formControlName="id" matInput required>
      <mat-error *ngIf="RegisterForm.get('id').hasError('required')">La matricola è richiesta</mat-error>
      </mat-form-field><br><br>

      <!--Email-->
      <mat-form-field>
      <input #email type="email" placeholder="Email" formControlName="email" matInput required>
      <mat-error *ngIf="RegisterForm.hasError('required','email')">Inserisci un'email valida</mat-error>
      <mat-error *ngIf="RegisterForm.get('email').hasError('emailDomain')">Utilizza il dominio: studenti.polito.it o polito.it</mat-error> 
      </mat-form-field> <br><br>

      <!--Password-->
      <mat-form-field>
      <input #password type="password" placeholder="Password" formControlName="password" matInput required minlength="8">
      <mat-error *ngIf="RegisterForm.hasError('required', 'password')">Inserisci una password</mat-error>
      <mat-error *ngIf="RegisterForm.hasError('minlength','password')">Inserisci almeno 8 caratteri</mat-error>
      </mat-form-field><br>

      <!--ConfirmPassword-->
      <mat-form-field>
      <input #passwordRepeat type="password" placeholder="Ripeti password" formControlName="confirmPassword" matInput required minlength="8">
      <mat-error *ngIf="RegisterForm.hasError('notSame')"> Le due password non coincidono</mat-error>  
      <mat-error *ngIf="RegisterForm.get('confirmPassword').hasError('minlength')">Inserisci almeno 8 caratteri</mat-error>
      </mat-form-field><br><br>

    </form>
  </div>
  <br>

  <div class="login">
    Già registrato?&nbsp;
    <button mat-button (click)="openDialogLogin()">Login</button>
  </div>
</mat-dialog-content>

<mat-dialog-actions>
  <button mat-button mat-raised-button color="warn"(click)="close()">Annulla</button>
  <button mat-button mat-raised-button color="primary" (click)="register(name.value, surname.value, id.value, email.value, password.value)">Registrati</button>
</mat-dialog-actions>

