<h2 mat-dialog-title>Registrazione</h2>

<mat-dialog-content>
  <div class="container">

  <!--Image profile-->
    <div class="avatar">
      <div class="rounded-box">
        <img class="img" [src]="previewPhoto" />
      </div>
      <div class="camera-box">
        <input class="inputfile" type="file" name="pic" accept="image/*"
          (change)="onFileChanged($event)">
        <label><mat-icon class="camera">camera_alt</mat-icon></label>
      </div>
    </div>

  <!--RegisterForm-->
  <form [formGroup]="RegisterForm" class="form">

      <!--Nome-->
      <mat-form-field class="formField">
      <input class="input" #name type="text" placeholder="Nome" formControlName="name" matInput required autofocus>
      <mat-error class="input"*ngIf="RegisterForm.get('name').hasError('required')">Il nome è richiesto</mat-error>
      </mat-form-field><br><br>

      <!--Cognome-->
      <mat-form-field class="formField">
      <input class="input" #surname type="text" placeholder="Cognome" formControlName="surname" matInput required>
      <mat-error class="input" *ngIf="RegisterForm.get('surname').hasError('required')">Il cognome è richiesto</mat-error>
      </mat-form-field><br><br>

      <!--Matricola-->
      <mat-form-field class="formField">
      <input class="input" #id type="text" placeholder="Matricola" formControlName="id" matInput required>
      <mat-error class="input" *ngIf="RegisterForm.get('id').hasError('required')">La matricola è richiesta</mat-error>
      </mat-form-field><br><br>

      <!--Email-->
      <mat-form-field class="formField">
      <input class="input" #email type="email" placeholder="Email" formControlName="email" matInput required>
      <mat-error class="input" *ngIf="RegisterForm.hasError('required','email')">Inserisci un'email valida</mat-error>
      <mat-error class="input" *ngIf="RegisterForm.get('email').hasError('emailDomain')">Utilizza il dominio: studenti.polito.it o polito.it</mat-error>
      </mat-form-field> <br><br><br><br>

      <!--Password-->
      <mat-form-field class="formField">
      <input class="input" #password type="password" placeholder="Password" formControlName="password" matInput required minlength="8">
      <mat-error class="input" *ngIf="RegisterForm.hasError('required', 'password')">Inserisci una password</mat-error>
      <mat-error class="input" *ngIf="RegisterForm.hasError('minlength','password')">Inserisci almeno 8 caratteri</mat-error>
      <mat-error class="input" *ngIf="RegisterForm.hasError('maxlength','password')">Inserisci non più di 20 caratteri</mat-error>
      </mat-form-field><br><br>

      <!--ConfirmPassword-->
      <mat-form-field class="formField">
      <input class="input" #passwordRepeat type="password" placeholder="Ripeti password" formControlName="confirmPassword" matInput required minlength="8">
      <mat-error class="input" *ngIf="RegisterForm.hasError('notSame')"> Le due password non coincidono</mat-error>
      <mat-error class="input" *ngIf="RegisterForm.get('confirmPassword').hasError('minlength')">Inserisci almeno 8 caratteri</mat-error>
      <mat-error class="input" *ngIf="RegisterForm.get('confirmPassword').hasError('maxlength')">Inserisci non più di 20 caratteri</mat-error>
      </mat-form-field><br><br>

    </form>
  </div>
</mat-dialog-content>

<mat-progress-bar mode="query" *ngIf="querying"></mat-progress-bar>

<mat-dialog-actions class="actions">
  <div class="login">
    Già registrato?&nbsp;
    <button mat-button class="btnLogin" mat-stroked-button (click)="openDialogLogin()">Login</button>
  </div>
  <button mat-button mat-raised-button color="warn"(click)="close()">Annulla</button>
  <button mat-button mat-raised-button color="primary" (click)="register(name.value, surname.value, id.value, email.value, password.value)">Registrati</button>
</mat-dialog-actions>

